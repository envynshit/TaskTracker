{% load static %}
<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" type="text/css" href="{% static 'core/style.css' %}">
  <title>Dashboard</title>
</head>
<body>
  <body>
    <div class="layout">
  
      <!-- Left sidebar (navigation) -->
      <aside class="sidebar">
        <h2 class="sidebar-title">Menu</h2>
  
        <ul class="sidebar-list">
          <li class="{% if filter == 'today' %}is-active{% endif %}">
            <a href="{% url 'dashboard' %}?filter=today">Today</a>
          </li>
          <li class="{% if filter == 'week' %}is-active{% endif %}">
            <a href="{% url 'dashboard' %}?filter=week">This Week</a>
          </li>
          <li class="{% if filter == 'upcoming' %}is-active{% endif %}">
            <a href="{% url 'dashboard' %}?filter=upcoming">Upcoming</a>
          </li>
          <li class="{% if filter == 'completed' %}is-active{% endif %}">
            <a href="{% url 'dashboard' %}?filter=completed">Completed</a>
          </li>
          <li class="{% if filter == 'overdue' %}is-active{% endif %}">
            <a href="{% url 'dashboard' %}?filter=overdue">Overdue</a>
          </li>
        </ul>
  
        <nav class="sidebar-section">
          <h3 class="sidebar-heading">Lists</h3>
          <ul class="sidebar-list">
            <li><a href="#">Personal</a></li>
            <li><a href="#">Work</a></li>
          </ul>
        </nav>
      </aside>
  
      <!-- Middle column (your existing lists) -->
      <main class="main-column">
        <header class="main-header">
          <h2 class="card-title">
            {% if filter == 'today' %}Today
            {% elif filter == 'week' %}This Week
            {% elif filter == 'upcoming' %}Upcoming
            {% elif filter == 'completed' %}Completed
            {% elif filter == 'overdue' %}Overdue
            {% else %}Tasks{% endif %}
          </h2>
          <a href="{% url 'task_create' %}" class="btn-primary">+ New Task</a>
        </header>
  
        <section class="card">
        
          <ul class="item-list">
            {% for task in tasks %}
              <li class="item-row">
                <a href="{% url 'dashboard' %}?filter={{ filter }}&task={{ task.pk }}"
                   class="item-row-link">
                  <div class="item-main">
                    <span class="item-title">{{ task.title }}</span>
                    <span class="item-meta">
                      {{ task.get_status_display }} Â· {{ task.due_date }}
                    </span>
                  </div>
                  <span class="item-action-label">View</span>
                </a>
              </li>
            {% empty %}
              <li class="item-row item-empty">No tasks in this view.</li>
            {% endfor %}
          </ul>
          
          
        </section>        
  
        <!-- reuse the styled lists you already have for Today/Week/Completed/Overdue -->
        <!-- ... -->
      </main>
  
      <!-- Right column (task details / settings) -->
      <aside class="detail-column">
        <div class="card">
          <h2 class="card-title">Task details</h2>
      
          {% if selected_task %}
            <p><strong>Title:</strong> {{ selected_task.title }}</p>
            <p><strong>Description:</strong> {{ selected_task.description }}</p>
            <p><strong>Due:</strong> {{ selected_task.due_date }}</p>
            <p><strong>Status:</strong> {{ selected_task.get_status_display }}</p>
      
            <a href="{% url 'task_update' selected_task.pk %}" class="btn-primary">
              Edit task
            </a>
          {% else %}
            <p>Select a task from the middle list to see its details here.</p>
          {% endif %}
        </div>
      </aside>
  
    </div>
  </body>

  













  <h1>
    Hello, {{ request.user.username }} 
    <form method="post" action="{% url 'logout' %}" style="display:inline;">
    {% csrf_token %}
    <button type="submit">Logout</button>
    </form>
  </h1>
  
  <p><a href="{% url 'task_create' %}">+ New task</a> | 
    <a href="{% url 'reminder_create' %}">Set Reminder</a> |
  </p>
  <div class="card">

    <h2 class="card-title">Reminders</h2>
    <ul class="item-list">
      {% for reminder in reminders %}
        <li class="item-row">
          <div class="item-main">
            <span class="item-title">Reminder for "{{ reminder.task.title }}"</span>
            <span class="item-meta">{{ reminder.remind_at }}</span>
          </div>
        </li>
      {% empty %}
        <li class="item-row item-empty">No reminders set.</li>
      {% endfor %}
    </ul>
  
    <h2 class="card-title">Today</h2>
    <ul class="item-list">
      {% for task in tasks_today %}
        <li class="item-row">
          <div class="item-main">
            <span class="item-title">{{ task.title }}</span>
            <span class="item-meta">{{ task.get_status_display }}</span>
          </div>
          <a href="{% url 'task_update' task.pk %}" class="item-action btn-edit">Edit</a>
        </li>
      {% empty %}
        <li class="item-row item-empty">No tasks for today.</li>
      {% endfor %}
    </ul>
  
    <h2 class="card-title">This Week</h2>
    <ul class="item-list">
      {% for task in tasks_week %}
        <li class="item-row">
          <div class="item-main">
            <span class="item-title">{{ task.title }}</span>
            <span class="item-meta">due {{ task.due_date }}</span>
          </div>
          <a href="{% url 'task_update' task.pk %}" class="item-action btn-edit">Edit</a>
        </li>
      {% empty %}
        <li class="item-row item-empty">No tasks for this week.</li>
      {% endfor %}
    </ul>
  
    <h2 class="card-title">Completed</h2>
    <ul class="item-list">
      {% for task in tasks_completed %}
        <li class="item-row item-completed">
          <div class="item-main">
            <span class="item-title">{{ task.title }}</span>
          </div>
          <a href="{% url 'task_update' task.pk %}" class="item-action btn-edit">Edit</a>
        </li>
      {% empty %}
        <li class="item-row item-empty">No completed tasks yet.</li>
      {% endfor %}
    </ul>
  
    <h2 class="card-title">Overdue Tasks</h2>
    <ul class="item-list">
      {% for task in overdue_tasks %}
        <li class="item-row item-overdue">
          <div style="color: red;" class="item-main">
            <span class="item-title">{{ task.title }}</span>
            <span class="item-meta">was due {{ task.due_date }}</span>
          </div>
          <a href="{% url 'task_update' task.pk %}" class="item-action btn-edit">Edit</a>
          
        </li>
      {% empty %}
        <li class="item-row item-empty">No overdue tasks. ðŸŽ‰</li>
      {% endfor %}
    </ul>
  
  </div>
  

</body>
</html>
