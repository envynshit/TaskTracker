{% load static %}
<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" type="text/css" href="{% static 'core/style.css' %}">
  <title>Dashboard</title>
</head>
<body>
  <body>
    <div class="layout">
  
      <!-- Left sidebar (navigation) -->
      <aside class="sidebar">
        <h2 class="sidebar-title">Menu</h2>
  
        <ul class="sidebar-list">
          <li class="{% if filter == 'all' %}is-active{% endif %}">
            <a href="{% url 'dashboard' %}?filter=all">All Tasks</a>
          </li>
          <li class="{% if filter == 'today' %}is-active{% endif %}">
            <a href="{% url 'dashboard' %}?filter=today">Today</a>
          </li>
          <li class="{% if filter == 'week' %}is-active{% endif %}">
            <a href="{% url 'dashboard' %}?filter=week">This Week</a>
          </li>
          <li class="{% if filter == 'completed' %}is-active{% endif %}">
            <a href="{% url 'dashboard' %}?filter=completed">Completed</a>
          </li>
          <li class="{% if filter == 'overdue' %}is-active{% endif %}">
            <a href="{% url 'dashboard' %}?filter=overdue">Overdue</a>
          </li>
        </ul>
  
        <nav class="sidebar-section">
          <h3 class="sidebar-heading">Lists</h3>
          <ul class="sidebar-list">
            <li><a href="#">Personal</a></li>
            <li><a href="#">Work</a></li>
          </ul>
        </nav>
        <button class="btn-primary" style="margin-top: 1rem;">
          Logout
        </button>
      </aside>
  
      <!-- Middle column (your existing lists) -->
      <main class="main-column">
        <header class="main-header">
          <h2 class="card-title">
            {% if filter == 'all' %}All Tasks
            {% elif filter == 'today' %}Today
            {% elif filter == 'week' %}This Week
            {% elif filter == 'completed' %}Completed
            {% elif filter == 'overdue' %}Overdue
            {% else %}Tasks{% endif %}
          </h2>
          <a href="{% url 'task_create' %}" class="btn-primary">+ New Task</a>
        </header>
  
        <section class="card">
          <!-- Search bar and Sort Dropdown -->
          <form method="get" class="search-sort-container">
            <!-- keep current filter/task so they don't reset -->
            <input type="hidden" name="filter" value="{{ filter }}">
            {% if selected_task %}
              <input type="hidden" name="task" value="{{ selected_task.id }}">
            {% endif %}
          
            <input
              type="text"
              name="q"
              placeholder="Search tasks..."
              class="search-input"
              value="{{ search_query|default:'' }}"
            >
          
            <select name="sort" class="sort-dropdown">
              <option value="">Sort by...</option>
              <option value="due_date"  {% if sort_option == "due_date" %}selected{% endif %}>
                Due Date (Ascending)
              </option>
              <option value="-due_date" {% if sort_option == "-due_date" %}selected{% endif %}>
                Due Date (Descending)
              </option>
              <option value="title"     {% if sort_option == "title" %}selected{% endif %}>
                Title (A-Z)
              </option>
              <option value="-title"    {% if sort_option == "-title" %}selected{% endif %}>
                Title (Z-A)
              </option>
            </select>
          
            <button type="submit">Apply</button>
          </form>
          

          <ul class="item-list">
            {% for task in tasks %}
              <li class="item-row">
                <a href="{% url 'dashboard' %}?filter={{ filter }}&task={{ task.pk }}"
                   class="item-row-link">
                  <div class="item-main">
                    <span class="item-title">{{ task.title }}</span>
                    <span class="item-meta">
                      {{ task.get_status_display }} Â· {{ task.due_date }}
                    </span>
                  </div>
                  <span class="item-action-label">View</span>
                </a>
              </li>
            {% empty %}
              <li class="item-row item-empty">No tasks in this view.</li>
            {% endfor %}
          </ul>
          
          
        </section>        
  
        <!-- reuse the styled lists you already have for Today/Week/Completed/Overdue -->
        <!-- ... -->
      </main>
  
      <!-- Right column (task details / settings) -->
      <aside class="detail-column">
        <div class="card">
          <h2 class="card-title">Task details</h2>
      
          {% if selected_task %}
            <p><strong>Title:</strong> {{ selected_task.title }}</p>
            <p><strong>Description:</strong> {{ selected_task.description }}</p>
            <p><strong>Due:</strong> {{ selected_task.due_date }}</p>
            <p><strong>Status:</strong> {{ selected_task.get_status_display }}</p>
            <a href="{% url 'reminder_create' selected_task.pk %}" class="btn-secondary">
              Set Reminder
            </a>
            

          

            <a href="{% url 'task_update' selected_task.pk %}" class="btn-primary">
              Edit task
            </a>
          {% else %}
            <p style="font-family: Arial, sans-serif;">No Selected Task.</p>
          {% endif %}
        </div>
      </aside>
  
    </div>
  </body>
</html>
